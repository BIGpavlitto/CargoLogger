<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/registrationStyles.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
    <title>Registration</title>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <div class="card my-5 ">
                <form class="card-body cardbody-color p-lg-5" id="myForm" action="/registration" method="POST">
                    <h4 class="text-center text-dark mt-5 mb-3">Create an account!</h4>
                    <div class="mb-3">
                        <input for="name" type="text" class="form-control" name="name" id="nameField"
                               placeholder="Enter your name...">
                        <span id="errorName"
                              style="display: none; color: red;">Name should contain at least 3 chars!</span>
                    </div>
                    <div class="mb-3">
                        <input for="surname" type="text" class="form-control" name="surname" id="surnameField"
                               placeholder="Enter your surname...">
                        <span id="errorSurname"
                              style="display: none; color: red;">Surname should contain at least 3 chars!</span>
                    </div>
                    <div class="mb-3">
                        <input for="phoneNumber" type="number" class="form-control" name="phoneNumber" id="phoneField"
                               placeholder="Enter your phone number...">
                        <span id="errorPhoneNumber"
                              style="display: none; color: red;">Phone number should be at least 7 symbols</span>
                    </div>
                    <div class="mb-3">
                        <input for="email" type="number" class="form-control" name="phoneNumber" id="emailField"
                               placeholder="Enter your email...">
                        <span id="errorEmail"
                              style="display: none; color: red;">Phone number should be at least 7 symbols</span>
                    </div>
                    <div class="btn-group dropend">
                        <select class="btn btn-color mb-5 dropdown-toggle" name="role" id="option">
                            <option value="">Choose a role</option>
                            <option value="manager">Manager</option>
                            <option value="driver">Driver</option>
                        </select>
                        <span id="errorOption" class="pt-2 pl-2"
                              style="display: none; color: red;">Select option!</span>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-color px-5 mb-1 w-100" onclick="validateInput()">
                            Register
                        </button>
                    </div>
                    <div class="text-center">
                        <a class="btn btn-color px-1 mb-5 w-100" href="/login" role="button">Back to login</a>
                    </div>
                    <div id="registration" style="display: none">
                        <div class="d-flex align-items-center justify-content-center">
                            <div class="loader"></div>
                            <span>Registering user. Please wait!</span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    function validateInput() {
        const name = document.getElementById('nameField').value;
        const errorName = document.getElementById('errorName');

        const surname = document.getElementById('surnameField').value;
        const errorSurname = document.getElementById('errorSurname');

        const phone = document.getElementById('phoneField').value;
        const errorPhone = document.getElementById('errorPhoneNumber');

        const selectedOption = document.getElementById('option').value;
        const errorOption = document.getElementById('errorOption');

        const registration = document.getElementById('registration');

        if (name.length < 3 && surname.length < 3 && phone.length < 7 && selectedOption === "") {
            setTimeout(() => {
                location.reload();
            }, 3000);
            errorName.style.display = 'inline';
            errorSurname.style.display = 'inline';
            errorPhone.style.display = 'inline';
            errorOption.style.display = 'inline';
        } else if (name.length < 3) {
            setTimeout(() => {
                location.reload();
            }, 3000);
            errorName.style.display = 'inline';
        } else if (surname.length < 3) {
            setTimeout(() => {
                location.reload();
            }, 3000);
            errorSurname.style.display = 'inline';
        } else if (phone.length < 7) {
            setTimeout(() => {
                location.reload();
            }, 3000);
            errorPhone.style.display = 'inline';
        } else if (selectedOption === "") {
            setTimeout(() => {
                location.reload();
            }, 3000);
            errorOption.style.display = 'inline';
        } else {
            registration.style.display = 'inline';
            setTimeout(() =>{
                document.getElementById('myForm').submit();
            },4000);
        }
    }
</script>
</html>